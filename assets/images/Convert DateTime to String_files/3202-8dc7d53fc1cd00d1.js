"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3202],{41932:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(51217),s=n(22830),r=n(35250),i=n(70079),o=n(19012);function l(e){var t=e.text,n=(0,o.Z)(),a=(0,s._)((0,i.useState)(!0),2),l=a[0],u=a[1],d=(0,s._)((0,i.useState)(0),2),f=d[0],m=d[1],h=(0,i.useMemo)(function(){return new c().humanTypingDelaysQuertyDistance(t)},[t]);return(0,i.useEffect)(function(){t&&l&&(u(!0),h.forEach(function(e,t){setTimeout(function(){n()&&(m(t),t===h.length-1&&u(!1))},e)}))},[h,n,l,t]),(0,r.jsxs)(r.Fragment,{children:[t.substring(0,f+1),l&&"â–‹"]})}var c=function(){function e(){(0,a._)(this,e)}var t=e.prototype;return t.qwertyDistance=function(e,t){var n,a,r={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},i=(0,s._)(null!==(n=r[e.toLowerCase()])&&void 0!==n?n:[0,0],2),o=i[0],l=i[1],c=(0,s._)(null!==(a=r[t.toLowerCase()])&&void 0!==a?a:[0,0],2);return Math.abs(o-c[0])+Math.abs(l-c[1])},t.humanTypingDelaysQuertyDistance=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=0,s=[],r=0;r<e.length;++r){var i=void 0;if(r>0){var o=this.qwertyDistance(e[r-1],e[r]);i=0===o?this.getRandomInt(t,Math.floor(n/2)):1===o?this.getRandomInt(t,Math.floor(2*n/3)):this.getRandomInt(t,n)}else i=this.getRandomInt(t,n);s.push(i+a),a+=i}return s},t.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e}()},13940:function(e,t,n){n.d(t,{V:function(){return eg},Z:function(){return ef}});var a=n(39324),s=n(71209),r=n(22830),i=n(4337),o=n(35250),l=n(28735),c=n(10664),u=n(90408),d=n(82081),f=n(19841),m=n(72201),h=n(26430),g=n(84913),p=n(44043),x=n(82187),v=n(69262),y=n(70737),b=n(97296),j=n(91530),M=n.n(j),k=n(60554),w=n.n(k),_=n(70079),N=n(1454),C=n(94968),F=n(70671),Z=n(32004),S=n(21389),P=n(95137),T=n(32877),D=n(37469),E=n(78931),R=n(33669),z=n(66085),A=n(2166),B=n(21817),L=n(41932),I=n(67273),W=n(61402),O=n(79579),U=n(89368),H=n(20522),$=n(47428),Y=n(6038),q=n(92720),V=n(2295);function G(e){var t=e.conversation,n=e.handleEditTitle,s=e.isActive,i=(0,V.iF)(),u=(0,r._)((0,_.useState)(!1),2),d=u[0],m=u[1];return(0,_.useEffect)(function(){if(s)return(0,l.LW)(c.n,{deleteChat:function(){m(!0)}})},[s]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(q.Z.Root,{children:[(0,o.jsx)($.xz,{asChild:!0,children:(0,o.jsxs)("button",{className:(0,f.default)("absolute bottom-0 right-0 top-0 flex w-9 items-center justify-center rounded text-token-text-tertiary transition hover:text-token-text-secondary radix-state-open:text-token-text-secondary",!s&&"invisible group-hover:visible radix-state-open:visible"),children:[(0,o.jsx)("div",{className:(0,f.default)("pointer-events-none absolute bottom-0 right-0 top-0 w-12 rounded bg-gradient-to-l from-60% to-transparent",s?"from-token-surface-tertiary":"from-token-surface-primary dark:from-gray-800")}),(0,o.jsx)(N.K9M,{className:"icon-sm relative"})]})}),(0,o.jsx)(q.Z.Portal,{children:(0,o.jsxs)(q.Z.Content,{align:"center",children:[(0,o.jsx)(q.Z.Item,{onClick:function(){n()},children:(0,o.jsx)(Z.Z,(0,a._)({},X.renameConversation))}),(0,o.jsx)(q.Z.Item,{onClick:function(){m(!0)},children:(0,o.jsx)(Z.Z,(0,a._)({},X.deleteConversation))})]})})]}),d&&(0,o.jsx)(eg,{title:t.title,handleDelete:function(){P.ZP.patchConversation(t.id,{is_visible:!1}).then(function(){i()}),s&&w().push("/",void 0,{shallow:!0})},onClose:function(){m(!1)}})]})}function J(e){var t=e.size,n=void 0===t?"medium":t;return(0,o.jsx)("div",{className:"overflow-hidden rounded bg-black dark:bg-white",style:{height:Y.EF[n],width:Y.EF[n]}})}function Q(e){var t=e.conversation,n=e.onClose,a=function(){i!==t.title&&(D.tQ.setTitle(t.id,i,D._L.User),u.o.logEvent(d.a.renameThread,{threadId:t.id,content:i}),P.ZP.patchConversation(t.id,{title:i}).then(function(){c()}))},s=(0,r._)((0,_.useState)(t.title),2),i=s[0],l=s[1],c=(0,V.iF)();return(0,o.jsx)("input",{type:"text",value:i,onChange:function(e){l(e.target.value)},onKeyDown:function(e){switch(e.key){case"Escape":n();break;case"Enter":a(),n()}},onBlur:function(){a(),n()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function K(e){var t=e.conversation,n=e.isActive,a=e.elementRef,s=(0,E.ec)(function(e){return e.currentWorkspace}),i=null!=t.conversation_template_id&&null!=s?(0,o.jsx)(Y.Ao,{workspaceId:s.id,templateId:t.conversation_template_id,iconSize:"small",className:"gizmo:rounded"}):(0,o.jsx)(J,{size:"small"}),l=(0,r._)((0,_.useState)(!1),2),c=l[0],m=l[1],h=(0,A.Z)(t.id,t.title,n),g=h.resolvedTitle,p=h.isTypingEffect,x=(0,R.w$)();return(0,o.jsxs)("div",{className:"group relative mx-1",children:[(0,o.jsxs)("a",{href:(0,z.ZV)(t.id),onClick:function(e){if(e.preventDefault(),!n){var a;a=t.id,W.hx.abortAllRequests(),u.o.logEvent(d.a.loadThread,{threadId:a}),w().push((0,z.ZV)(a),void 0,{shallow:!0})}},onDoubleClick:function(){m(!0)},ref:a,className:(0,f.default)("flex items-center gap-2 rounded p-2",n&&"bg-token-surface-tertiary"),children:[(0,o.jsx)("div",{children:i}),(0,o.jsxs)("div",{className:"relative grow overflow-hidden whitespace-nowrap",children:[p&&n&&x?(0,o.jsx)(L.Z,{text:null!=g?g:""}):g,(0,o.jsx)("div",{className:(0,f.default)("absolute bottom-0 right-0 top-0 w-8 bg-gradient-to-l to-transparent",n?"from-token-surface-tertiary":"from-token-surface-primary dark:from-gray-800")})]})]}),c?(0,o.jsx)("div",{className:"absolute bottom-0 left-[31px] right-2 top-0 flex items-center bg-token-surface-tertiary",children:(0,o.jsx)(Q,{conversation:t,onClose:function(){m(!1)}})}):(0,o.jsx)(G,{conversation:t,handleEditTitle:function(){m(!0)},isActive:n})]})}var X=(0,C.vU)({renameConversation:{id:"history.item.editConversationTitle",defaultMessage:"Rename conversation",description:"Menu item label in conversation sidebar"},deleteConversation:{id:"history.item.deleteConversation",defaultMessage:"Delete conversation",description:"Menu item label in conversation sidebar"}}),ee=n(1821);function et(){var e=(0,i._)(["flex flex-col gap-2 pb-2 dark:text-gray-100 text-gray-800 text-sm\n",""]);return et=function(){return e},e}function en(){var e=(0,i._)(["flex p-3 items-center gap-3 relative rounded-md hover:bg-gray-100 dark:hover:bg-[#2A2B32] cursor-pointer break-all\n","\n"]);return en=function(){return e},e}function ea(){var e=(0,i._)(["flex py-3 px-3 items-center gap-3 gizmo:gap-2 relative rounded-md hover:bg-gray-100 dark:hover:bg-[#2A2B32] cursor-pointer hover:pr-14 break-all\n","\n"]);return ea=function(){return e},e}function es(){var e=(0,i._)(["text-sm border-none bg-transparent p-0 m-0 w-full"]);return es=function(){return e},e}function er(){var e=(0,i._)(["flex-1 text-ellipsis max-h-5 overflow-hidden break-all relative"]);return er=function(){return e},e}function ei(){var e=(0,i._)(["h-9 pb-2 pt-3 px-3 text-xs text-gray-500 font-medium text-ellipsis overflow-hidden break-all bg-gray-50 gizmo:bg-white dark:bg-gray-900 gizmo:dark:bg-gray-800"]);return ei=function(){return e},e}function eo(){var e=(0,i._)(["absolute inset-y-0 right-0 w-8 z-10 bg-gradient-to-l\n",""]);return eo=function(){return e},e}function el(){var e=(0,i._)(["absolute flex right-1 z-10 dark:text-gray-300 text-gray-800\n",""]);return el=function(){return e},e}function ec(){var e=(0,i._)(["p-1 hover:text-token-text-primary"]);return ec=function(){return e},e}var eu=(0,C.vU)({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today",description:"Label for today's history bucket"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday",description:"Label for yesterday's history bucket"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days",description:"Label for the history bucket of the previous 7 days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days",description:"Label for the history bucket of the previous 30 days"},unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history",description:"Error message when history fails to load"},retryButton:{id:"history.retryButton",defaultMessage:"Retry",description:"Button to retry loading history"},showMoreButton:{id:"history.showMoreButton",defaultMessage:"Show more",description:"Button to show more history items"},deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?",description:"Title of the modal to confirm deleting a conversation"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}.",description:"Body of the modal to confirm deleting a conversation"},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete",description:"Button to confirm deleting a conversation"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel",description:"Button to cancel deleting a conversation"}}),ed={initial:function(e){return e.isNew?{opacity:0,height:0,overflow:"hidden"}:{}},animate:function(){return{opacity:1,height:"auto"}},exit:function(){return{opacity:0,height:0}}};function ef(e){var t,n,s=e.activeId,i=e.onNewThread,l=(0,F.Z)(),c=(0,r._)((0,_.useState)(!1),2),u=c[0],d=c[1],j=(0,r._)((0,_.useState)(0),2),M=j[0],k=j[1],w=(0,B.Z)(),N=(0,V.MO)(),C=N.conversations,S=N.hasNextPage,P=N.fetchNextPage,D=N.isLoading,R=N.isFetchingNextPage,z=N.isError,A=(0,E.hz)().has(T.DY),L=(0,_.useRef)(null),W=(0,_.useCallback)(function(e){var t;A&&!D&&null!=e&&(null===(t=L.current)||void 0===t||t.disconnect(),L.current=new IntersectionObserver(function(e){e[0].isIntersecting&&S&&P()}),L.current.observe(e))},[A,D,S,P]);(0,_.useEffect)(function(){return function(){var e;null===(e=L.current)||void 0===e||e.disconnect()}},[]);var O=(0,V.iF)();(0,V.Od)();var U=(t=(0,_.useRef)(),n=(0,_.useRef)(),((0,_.useEffect)(function(){t.current=n.current,n.current=C},[C]),C===n.current)?t.current:n.current);(0,_.useEffect)(function(){w(function(){k(M+1)},(0,h.Z)((0,g.Z)(),Date.now())+1e3)},[M,w]);var $=0===C.length,Y=(0,H.Ml)(),q=(0,_.useMemo)(function(){return C.reduce(function(e,t){var n,a,s=new Date(null!==(a=null!==(n=t.update_time)&&void 0!==n?n:t.create_time)&&void 0!==a?a:0),r=(0,m.Z)(new Date,s);if(0===r)e.recent.today.items.push(t);else if(r<=1)e.recent.yesterday.items.push(t);else if(r<=7)e.recent.lastSeven.items.push(t);else if(r<=30)e.recent.lastThirty.items.push(t);else if((0,v.Z)(s)){var i=(0,x.Z)(s),o=(0,p.Z)(s),c="".concat(i,"-").concat(o);e.dynamicMonths[c]?e.dynamicMonths[c].items.push(t):e.dynamicMonths[c]={label:l.formatDate(s,{month:"long"}),items:[t]}}else{var u=(0,x.Z)(s),d="".concat(u,"-");e.dynamicYears[d]?e.dynamicYears[d].items.push(t):e.dynamicYears[d]={label:l.formatDate(s,{year:"numeric"}),items:[t]}}return e},{recent:{today:{label:(0,o.jsx)(Z.Z,(0,a._)({},eu.historyBucketToday)),items:[]},yesterday:{label:(0,o.jsx)(Z.Z,(0,a._)({},eu.historyBucketYesterday)),items:[]},lastSeven:{label:(0,o.jsx)(Z.Z,(0,a._)({},eu.historyBucketLastSeven)),items:[]},lastThirty:{label:(0,o.jsx)(Z.Z,(0,a._)({},eu.historyBucketLastThirty)),items:[]}},dynamicMonths:{},dynamicYears:{}})},[M,C]);return(0,o.jsxs)(em,{$centered:D||z&&$,children:[$&&D&&(0,o.jsx)(ee.Z,{className:"m-auto"}),$&&z&&(0,o.jsxs)("div",{className:"p-3 text-center italic text-gray-500",children:[(0,o.jsx)(Z.Z,(0,a._)({},eu.unableToLoadHistory)),!u&&(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)(I.z,{as:"button",color:"dark",size:"small",className:"m-auto mt-2",onClick:function(){d(!0),O()},children:(0,o.jsx)(Z.Z,(0,a._)({},eu.retryButton))})})]}),!D&&(0,o.jsx)("div",{children:(0,o.jsx)(y.M,{initial:!1,children:[q.recent,q.dynamicMonths,q.dynamicYears].flatMap(function(e,t){return(0,o.jsx)("span",{children:Object.entries(e).map(function(e){var t=(0,r._)(e,2),n=t[0],a=t[1],l=a.items,c=a.label;if("today"!==n&&!l.length)return null;var u=!!l.find(function(e){var t;return C.length>0&&e.id===(null===(t=C[0])||void 0===t?void 0:t.id)});return(0,o.jsxs)(b.E.div,{className:"relative",layoutId:"bucket-".concat(n),layout:"position",initial:{height:0,opacity:1,position:"relative"},animate:{height:"auto",opacity:1,transition:{duration:.2,ease:"easeIn"}},children:[l.length>0&&(0,o.jsx)(b.E.div,{className:(0,f.default)("sticky top-0",u?"z-[16]":"z-[14]"),layoutId:"bucketTitle-".concat(n),layout:"position",children:(0,o.jsx)(eb,{children:c})}),(0,o.jsx)("ol",{children:l.map(function(e,t){var n=s===e.id,a=null==U?void 0:U.find(function(t){return t.id===e.id}),r=S&&C[C.length-5-1].id===e.id?W:void 0;return(0,o.jsx)(b.E.li,{className:(0,f.default)("relative",u&&0===t?"z-[15]":""),layoutId:"".concat(e.id),layout:"position",custom:{isNew:!a},variants:ed,initial:"initial",animate:"animate",exit:"exit",children:Y?(0,o.jsx)(K,{conversation:e,isActive:n,elementRef:r}):(0,o.jsx)(eh,{id:e.id,title:e.title,active:n,onNewThread:i,elementRef:r})},"history-item-".concat(e.id))})})]},n)})},"category-".concat(t))})})}),A?R&&(0,o.jsx)("div",{className:"m-4 mb-5 flex justify-center",children:(0,o.jsx)(ee.Z,{})}):(0,o.jsx)(o.Fragment,{children:S&&(0,o.jsx)(I.z,{as:"button",onClick:function(){return P()},color:"dark",className:"m-auto mb-2",size:"small",loading:R,children:(0,o.jsx)(Z.Z,(0,a._)({},eu.showMoreButton))})})]})}var em=S.Z.div(et(),function(e){return e.$centered&&"h-full justify-center items-center"});function eh(e){var t=e.id,n=e.title,a=e.active,s=e.onNewThread,i=e.elementRef,m=(0,R.w$)(),h=(0,r._)((0,_.useState)(!1),2),g=h[0],p=h[1],x=(0,_.useRef)(null),v=(0,V.iF)(),y=(0,_.useCallback)(function(e){var a,s;if(null==e||e.preventDefault(),p(!1),(null===(a=x.current)||void 0===a?void 0:a.value)&&(null===(s=x.current)||void 0===s?void 0:s.value)!==n){var r=x.current.value;D.tQ.setTitle(t,r,D._L.User),u.o.logEvent(d.a.renameThread,{threadId:t,content:r}),P.ZP.patchConversation(t,{title:r}).then(function(){v()})}},[t,v,n]),b=(0,_.useCallback)(function(e){"Enter"===e.key&&y()},[y]),j=(0,_.useCallback)(function(){P.ZP.patchConversation(t,{is_visible:!1}).then(function(){v()}),s()},[t,s,v]),k=(0,_.useCallback)(function(e){W.hx.abortAllRequests(),e.preventDefault(),u.o.logEvent(d.a.loadThread,{threadId:t}),w().push((0,z.ZV)(t),void 0,{shallow:!0})},[t]),C=(0,A.Z)(t,n,a),F=C.resolvedTitle,Z=C.isTypingEffect,S=(0,o.jsx)(N.IC0,{className:"icon-sm"}),T=(0,r._)((0,_.useState)(!1),2),E=T[0],B=T[1];if((0,_.useEffect)(function(){if(a)return(0,l.LW)(c.n,{deleteChat:function(){B(!0)}})},[a]),g)return(0,o.jsxs)(ex,{$active:a,children:[S,(0,o.jsx)(ev,{ref:x,type:"text",defaultValue:null!=F?F:"",autoFocus:!0,onKeyDown:b,className:"mr-0",onBlur:y}),(0,o.jsxs)(eM,{$active:!0,children:[(0,o.jsx)(ek,{onClick:y,children:(0,o.jsx)(N.UgA,{className:"icon-sm"})}),(0,o.jsx)(ek,{onClick:function(e){e.preventDefault(),p(!1)},children:(0,o.jsx)(N.q5L,{className:"icon-sm"})})]})]});var I=Z&&a&&m;return(0,o.jsxs)(o.Fragment,{children:[a&&E&&(0,o.jsx)(eg,{title:n,handleDelete:j,onClose:function(){B(!1)}}),(0,o.jsxs)(ep,{onClick:a?M():k,$active:a,className:(0,f.default)("group",I&&"animate-flash"),ref:i,children:[S,(0,o.jsxs)(ey,{children:[I?(0,o.jsx)(L.Z,{text:null!=F?F:""}):F,(!Z||!a)&&(0,o.jsx)(ej,{$active:a})]}),a&&(0,o.jsxs)(eM,{$active:a,children:[(0,o.jsx)(ek,{onClick:function(e){e.preventDefault(),p(!0)},children:(0,o.jsx)(N.Nte,{className:"icon-sm"})}),(0,o.jsx)(ek,{onClick:function(){B(!0)},children:(0,o.jsx)(N.Ybf,{className:"icon-sm"})})]})]})]})}function eg(e){var t=e.title,n=e.handleDelete,r=e.onClose,i=(0,F.Z)();return(0,o.jsx)(U.Z,{isOpen:!0,onClose:r,type:"success",title:i.formatMessage(eu.deleteModalTitle),primaryButton:(0,o.jsx)(O.ZP.Button,{title:i.formatMessage(eu.deleteModalConfirm),color:"danger",onClick:function(){n(),r()}}),secondaryButton:(0,o.jsx)(O.ZP.Button,{title:i.formatMessage(eu.deleteModalCancel),color:"neutral",onClick:r}),children:(0,o.jsx)(Z.Z,(0,s._)((0,a._)({},eu.deleteModalBody),{values:{title:(0,o.jsx)("strong",{children:t})}}))})}var ep=S.Z.a(en(),function(e){return e.$active?"bg-gray-100 dark:bg-gray-800 pr-14 dark:hover:bg-gray-800":"bg-gray-50 gizmo:bg-white gizmo:hover:bg-gray-100 hover:pr-4 dark:bg-gray-900"}),ex=S.Z.div(ea(),function(e){return e.$active?"pr-14 bg-gray-100 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800":"bg-gray-100 dark:bg-gray-900"}),ev=S.Z.input(es()),ey=S.Z.div(er()),eb=S.Z.h3(ei()),ej=S.Z.div(eo(),function(e){return e.$active?"dark:from-gray-800 from-gray-100":"dark:from-gray-900 from-gray-50 gizmo:from-white group-hover:from-gray-100 dark:group-hover:from-[#2A2B32]"}),eM=S.Z.div(el(),function(e){return e.$active?"visible":"invisible group-hover:visible"}),ek=S.Z.button(ec())},52696:function(e,t,n){n.d(t,{$3:function(){return f},Ap:function(){return c},CV:function(){return m},GA:function(){return d},Gk:function(){return x},Ix:function(){return g},_O:function(){return p},bE:function(){return v},cI:function(){return h},qH:function(){return u}});var a=n(96237),s=n(75641),r=n(78931),i=n(62509),o=n(70079),l=n(70671);function c(){var e=(0,l.Z)(),t=e.formatMessage(y.adminRoleName),n=e.formatMessage(y.ownerRoleName),r=e.formatMessage(y.standardRoleName);return(0,o.useMemo)(function(){var e;return e={},(0,a._)(e,s.r3.OWNER,n),(0,a._)(e,s.r3.ADMIN,t),(0,a._)(e,s.r3.STANDARD,r),e},[n,t,r])}function u(e){var t=(0,l.Z)();return e?e.structure===s.CZ.PERSONAL?t.formatMessage(y.personalPlanName):t.formatMessage(y.enterprisePlanName):t.formatMessage(y.personalPlanName)}function d(e){return m((0,l.Z)(),e)}function f(){var e=(0,r.ec)(function(e){return e.currentWorkspace});return m((0,l.Z)(),e)}function m(e,t){var n;return t&&t.structure!==s.CZ.PERSONAL?null!==(n=t.name)&&void 0!==n?n:e.formatMessage(y.defaultWorkspaceTitle):e.formatMessage(y.personalWorkspaceTitle)}function h(){var e,t,n,a,s=(0,i.kP)().session;return null!==(a=null!==(n=null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.name)&&void 0!==n?n:null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.email)&&void 0!==a?a:null}function g(e){var t=(0,r.ec)(function(e){return e.currentWorkspace}),n=(0,r.ec)(r.F_.isPersonalWorkspace),a=(0,r.$T)(),i=d(t),o=h();return e&&!a?e.structure===s.CZ.PERSONAL?o:e.name:t?n?o:i:o}function p(){return(0,r.ec)(function(e){return e.workspaces})}function x(e){var t=p().find(function(t){return t.id===e});return(null==t?void 0:t.role)===s.r3.OWNER}function v(e){var t=p().find(function(t){return t.id===e});return(null==t?void 0:t.role)===s.r3.ADMIN}var y=(0,n(94968).vU)({defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace",description:"title for workspace without a name"},personalWorkspaceTitle:{id:"useWorkspaces.personalWorkspaceTitle",defaultMessage:"Personal account",description:"title for personal workspace"},personalPlanName:{id:"useWorkspaces.personalPlanName",defaultMessage:"Personal",description:"label for personal tier account"},enterprisePlanName:{id:"useWorkspaces.enterprisePlanName",defaultMessage:"Enterprise",description:"label for enterprise tier account"},adminRoleName:{id:"useWorkspaces.adminRoleName",defaultMessage:"Admin",description:"Role name for an admin user"},ownerRoleName:{id:"useWorkspaces.ownerRoleName",defaultMessage:"Owner",description:"Role name for an owner user"},standardRoleName:{id:"useWorkspacews.standardRoleName",defaultMessage:"Member",description:"Role name for a standard user"}})},92720:function(e,t,n){var a=n(39324),s=n(71209),r=n(70216),i=n(35250),o=n(47428),l=n(70079),c=n(89705),u={Root:o.fC,Trigger:function(e){return(0,i.jsx)(c.J7,(0,a._)({$as:o.xz},e))},Portal:o.Uv,Content:function(e){var t;return(0,i.jsx)(c.ay,(0,s._)((0,a._)({},e),{$as:o.VY,sideOffset:4,align:null!==(t=e.align)&&void 0!==t?t:"start"}))},Item:l.forwardRef(function(e,t){var n=e.children,l=e.onSelect,u=(0,r._)(e,["children","onSelect"]);return(0,i.jsx)(c.mS,(0,s._)((0,a._)({$as:o.ck,ref:t,onSelect:l},u),{children:n}))})};t.Z=u},47393:function(e,t,n){n.d(t,{Z:function(){return eY}});var a,s,r=n(39324),i=n(71209),o=n(22830),l=n(4337),c=n(35250),u=n(70596),d=n(32877),f=n(46020),m=n(78931),h=n(32542),g=n(32148),p=n(19841),x=n(44544),v=n(70079),y=n(1454),b=n(70671),j=n(32004),M=n(94968),k=n(21389),w=n(67273),_=n(45635),N=n(67),C=n(20522),F=n(21722),Z=n(81949),S=n(38104),P=n(75641),T=n(95137),D=n(21817),E=n(74686),R=n(62509),z=n(56115),A=n(92720),B=n(79579),L=n(89368),I=n(55629),W=n(1821);function O(e){var t=e.accept,n=e.onFilePicked,a=e.loading,s=e.disabled,r=e.className,i=e.text,o=e.multiple,l=(0,v.useRef)(null),u=(0,v.useCallback)(function(){var e;null===(e=l.current)||void 0===e||e.click()},[]),d=(0,v.useCallback)(function(e){var t=e.target.files;t&&t.length>0&&(n(Array.from(t)),e.target.value="")},[n]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w.z,{onClick:u,disabled:s||a,color:"none",className:r,children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[a?(0,c.jsx)(W.Z,{className:"h-4 w-4"}):(0,c.jsx)(y.OvN,{className:"icon-sm"}),i&&(0,c.jsx)("span",{children:i})]})}),(0,c.jsx)("input",{type:"file",accept:t,ref:l,className:"hidden",onChange:d,multiple:void 0!==o&&o})]})}var U=n(63031),H=n(88798),$=n(5268),Y=(0,M.vU)({errorLoadingFiles:{id:"filesModal.errorLoadingFiles",defaultMessage:"Failed to load files",description:"Error message when loading files fails"}}),q=["application/pdf","text/plain","text/markdown","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/csv"],V=(0,M.vU)({myFiles:{id:"filesModal.myFiles",defaultMessage:"My Files",description:"Title for the files modal"},noFilesFound:{id:"filesModal.noFilesFound",defaultMessage:"No files found.",description:"Message displayed when no files are found"},uploadFile:{id:"filesModal.uploadFile",defaultMessage:"Upload File",description:"Label for the upload file button"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again.",description:"Error message when file download fails"},fileDeleteFailed:{id:"filesModal.fileDeleteFailed",defaultMessage:"File delete failed. Please try again.",description:"Error message when file delete fails"},fileUploadFailed:{id:"filesModal.fileUploadFailed",defaultMessage:"File upload failed. Please try again.",description:"Error message when file upload fails"},fileUploaded:{id:"filesModal.fileUploaded",defaultMessage:"Uploaded file",description:"Success message when file is uploaded"},fileDeleted:{id:"filesModal.fileDeleted",defaultMessage:"File deleted",description:"Success message when file is deleted"},allFilesDeleted:{id:"filesModal.allFilesDeleted",defaultMessage:"All files deleted",description:"Success message when all files are deleted"},allFilesDeleteFailed:{id:"filesModal.allFilesDeletedFailed",defaultMessage:"All files delete failed. Please try again.",description:"Error message when all files delete fails"},confirmDeleteAll:{id:"filesModal.confirmDeleteAll",defaultMessage:"Are you sure you want to delete all files?",description:"Confirmation message for deleting all files"},downloadAll:{id:"filesModal.downloadAll",defaultMessage:"Download All",description:"Label for the download all button"},deleteAll:{id:"filesModal.deleteAll",defaultMessage:"Delete All",description:"Label for the delete all button"},name:{id:"filesModal.name",defaultMessage:"Name",description:"Label for the name column"},date:{id:"filesModal.date",defaultMessage:"Date",description:"Label for the date column"},size:{id:"filesModal.size",defaultMessage:"Size",description:"Label for the size column"},successfullyEmbeddedFileTooltip:{id:"filesModal.successfullyEmbeddedFileTooltip",defaultMessage:"Successfully processed file for searching",description:"Tooltip for the successfully embedded file icon"},failedToEmbedFileTooltip:{id:"filesModal.failedToEmbedFileTooltip",defaultMessage:"Failed to process file for searching,\nplease try deleting and re-uploading",description:"Tooltip for the failed to embed file icon"},embeddingFileTooltip:{id:"filesModal.embeddingFileTooltip",defaultMessage:"Processing file for searching...",description:"Tooltip for the embedding file icon"},deleteHistoryModalCancel:{id:"filesModal.deleteHistoryModalCancel",defaultMessage:"Cancel",description:"Label for the cancel button"},confirmDownloadAll:{id:"filesModal.confirmDownloadAll",defaultMessage:"Are you sure you want to download all files?",description:"Confirmation message for downloading all files"},confirmCancelDownloadAll:{id:"filesModal.confirmCancelDownloadAll",defaultMessage:"Cancel Download All",description:"Label for the cancel download all button in the confirmation modal"},tooManyFilesWithSameName:{id:"filesModal.tooManyFilesWithSameName",defaultMessage:"Too many files with the same name. Please rename your file.",description:"Error message when too many files have the same name"},tooManyFilesUploadedAtOnce:{id:"filesModal.tooManyFilesUploadedAtOnce",defaultMessage:"You can only upload up to {maxFiles} files at a time.",description:"Error message when too many files are uploaded at once"},totalFileSizeExceedsLimit:{id:"filesModal.totalFileSizeExceedsLimit",defaultMessage:"The total size of the files exceeds the limit of {maxSize}.",description:"Error message when the total file size exceeds the limit"},filesModalDescription:{id:"filesModal.filesModalDescription",defaultMessage:"Files can be used with the My Files Browsing model. {totalUploadedSize} / {maxFileSize} of storage used.",description:"Description for the files modal"}});(a=s||(s={})).Uploading="uploading",a.Deleting="deleting";var G=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=1,s=e,r=e.lastIndexOf("."),i=r>=0?e.slice(0,r):e,o=r>=0?e.slice(r):"";t.find(function(e){return e.name===s})&&a<=n;)s="".concat(i," (").concat(a,")").concat(o),a++;if(a>n)throw Error();return s};function J(e){var t=e.label,n=e.children;return(0,c.jsx)(_.u,{side:"top",size:"xsmall",sideOffset:4,label:t,children:n})}function Q(e){var t=e.file,n=e.refetch,a=e.handleFileDelete,r=e.handleFileDeleteFailed,i=e.session,o=e.downloadedFiles,l=e.setDownloadedFiles,u=(0,v.useMemo)(function(){return(0,z.Z)(new Date(t.ready_time),"MMM d, yyyy")},[t.ready_time]),d=(0,v.useMemo)(function(){var e;return(e=t.size)<1048576?"".concat((e/1024).toFixed(0)," KB"):"".concat((e/1048576).toFixed(1)," MB")},[t.size]),f=(0,b.Z)(),m=(0,U.O6)(),h=(0,v.useCallback)((0,F._)(function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return[4,m(t.id,t.name)];case 1:return e.sent()&&l((0,Z._)(o).concat([t.id])),[2]}})}),[t,o,l,m]),g=(0,v.useCallback)((0,F._)(function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:if(!i)return[2];a(t),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,T.ZP.deleteFileFromFileService(t.id)];case 2:return e.sent(),H.m.success(f.formatMessage(V.fileDeleted)),[4,n()];case 3:return e.sent(),[3,5];case 4:return e.sent(),r(t),H.m.danger(f.formatMessage(V.fileDeleteFailed)),[3,5];case 5:return[2]}})}),[a,r,i,t,n,f]);return(0,c.jsxs)(I.Z.Row,{disabled:t.state===s.Uploading,children:[(0,c.jsx)(I.Z.Cell,{children:(0,c.jsxs)("div",{className:"inline-flex max-w-full gap-2 align-top",children:[t.retrieval_index_status===P.Xf.Success?(0,c.jsx)(J,{label:f.formatMessage(V.successfullyEmbeddedFileTooltip),children:(0,c.jsx)(y._rq,{className:"icon-xs mt-1 flex-shrink-0 text-green-600"})}):t.retrieval_index_status===P.Xf.Failed?(0,c.jsx)(J,{label:f.formatMessage(V.failedToEmbedFileTooltip),children:(0,c.jsx)(y.$Rx,{className:"icon-xs mt-1 flex-shrink-0 text-red-500"})}):(0,c.jsx)(J,{label:f.formatMessage(V.embeddingFileTooltip),children:(0,c.jsx)(W.Z,{className:"mt-1 flex-shrink-0 text-gray-500 dark:text-gray-100"})}),(0,c.jsx)("button",{className:(0,p.default)(o.includes(t.id)?"text-[#800080]":"hover:text-gray-900 dark:hover:text-gray-100","truncate whitespace-normal break-words text-left focus:outline-none"),onClick:h,children:(0,c.jsx)("span",{children:t.name})})]})}),(0,c.jsx)(I.Z.Cell,{className:"align-top",children:t.state!==s.Uploading&&u}),(0,c.jsx)(I.Z.Cell,{className:"align-top",children:t.state!==s.Uploading&&d}),(0,c.jsx)(I.Z.Cell,{textAlign:"right",className:"align-top",children:(0,c.jsx)("div",{className:"flex justify-end space-x-2",children:t.state!==s.Uploading&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"text-gray-500 hover:text-gray-600",onClick:h,children:(0,c.jsx)(y._hL,{className:"icon-sm"})}),(0,c.jsx)("button",{className:"text-gray-500 hover:text-gray-600",onClick:g,children:(0,c.jsx)(y.Ybf,{className:"icon-sm"})})]})})})]})}function K(){var e,t,n,a,l,u,d,h=(0,b.Z)(),g=(e=(0,m.hz)(),t=(0,b.Z)(),(0,$.a)(["files"],(0,F._)(function(){return(0,S.Jh)(this,function(e){switch(e.label){case 0:return[4,T.ZP.listFiles().catch(function(){return H.m.danger(t.formatMessage(Y.errorLoadingFiles)),{files:[]}})];case 1:return[2,e.sent()]}})}),{enabled:e.has("files_list_ui")})),p=g.data,x=g.isLoading,M=g.refetch,k=(0,o._)((0,v.useState)([]),2),w=k[0],_=k[1],N=(0,v.useRef)([]),C=(0,o._)((0,v.useState)([]),2),z=C[0],J=C[1],K=(0,D.Z)(),X=(0,R.kP)().session,ee=(0,v.useMemo)(function(){return null!==(d=null==p?void 0:p.files)&&void 0!==d?d:[]},[p]),et=(0,o._)((0,v.useState)([]),2),en=et[0],ea=et[1],es=(0,o._)((0,v.useState)(!1),2),er=es[0],ei=es[1],eo=(0,o._)((0,v.useState)(!1),2),el=eo[0],ec=eo[1],eu=(0,U.qS)(),ed=(0,v.useCallback)(function(){f.vm.closeFilesModal(),w.length>0&&M()},[M,w]),ef=(0,E.D)({mutationFn:function(e){return T.ZP.uploadFileUsingFileService(e,P.Ei.MyFiles)},onMutate:(n=(0,F._)(function(e){return(0,S.Jh)(this,function(t){return[2,e]})}),function(e){return n.apply(this,arguments)}),onSuccess:(a=(0,F._)(function(e){return(0,S.Jh)(this,function(t){switch(t.label){case 0:return[4,M()];case 1:return t.sent(),H.m.success(h.formatMessage(V.fileUploaded)),N.current.push(e.file_id),J((0,Z._)(N.current)),[2]}})}),function(e){return a.apply(this,arguments)}),onError:function(e,t){_(function(e){return e.filter(function(e){return e.name!==t.name})}),H.m.danger(h.formatMessage(V.fileUploadFailed))}}),em=(0,v.useCallback)((l=(0,F._)(function(e){var t;return(0,S.Jh)(this,function(n){switch(n.label){case 0:if(!X)return[2];n.label=1;case 1:return n.trys.push([1,6,,7]),[4,T.ZP.getFileInfo(e)];case 2:if(!((t=n.sent()).retrieval_index_status===P.Xf.Success||t.retrieval_index_status===P.Xf.Failed))return[3,4];return N.current=N.current.filter(function(t){return t!==e}),[4,M()];case 3:return n.sent(),[3,5];case 4:K(function(){return em(e)},500),n.label=5;case 5:return[3,7];case 6:return n.sent(),N.current=N.current.filter(function(t){return t!==e}),[3,7];case 7:return[2]}})}),function(e){return l.apply(this,arguments)}),[M,X,K]);(0,v.useEffect)(function(){N.current.length>0&&em(N.current[N.current.length-1])},[z,em]);var eh=(0,v.useCallback)((0,F._)(function(){var e;return(0,S.Jh)(this,function(t){switch(t.label){case 0:if(!X)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,eu(e=ee.filter(function(e){return e.use_case===P.Ei.MyFiles}),30)];case 2:return t.sent(),ea((0,Z._)(en).concat((0,Z._)(e.map(function(e){return e.id})))),[3,4];case 3:return t.sent(),H.m.danger(h.formatMessage(V.fileDownloadFailed)),[3,4];case 4:return[2]}})}),[X,ee,h,en,ea,eu]),eg=(0,v.useCallback)((0,F._)(function(){var e;return(0,S.Jh)(this,function(t){switch(t.label){case 0:if(e=ee.map(function(e){return(0,i._)((0,r._)({},e),{state:s.Deleting})}),!X)return[2];_((0,Z._)(w).concat((0,Z._)(e))),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,Promise.all(e.filter(function(e){return e.use_case===P.Ei.MyFiles}).map(function(e){return T.ZP.deleteFileFromFileService(e.id)}))];case 2:return t.sent(),H.m.success(h.formatMessage(V.allFilesDeleted)),[4,M()];case 3:return t.sent(),[3,5];case 4:return t.sent(),_([]),H.m.danger(h.formatMessage(V.allFilesDeleteFailed)),[3,5];case 5:return[2]}})}),[ee,w,X,h,M]),ep=(0,v.useCallback)(function(){ei(!0)},[]),ex=(0,v.useCallback)(function(){ec(!0)},[]),ev=(0,v.useCallback)((0,F._)(function(){return(0,S.Jh)(this,function(e){return ei(!1),eg(),[2]})}),[eg]),ey=(0,v.useCallback)(function(){ei(!1)},[]),eb=(0,v.useCallback)((0,F._)(function(){return(0,S.Jh)(this,function(e){return ec(!1),eh(),[2]})}),[eh]),ej=(0,v.useCallback)(function(){ec(!1)},[]),eM=(0,v.useCallback)(function(e,t){return e.findIndex(function(e){return e.name===t.name&&e.state!==s.Uploading})},[]),ek=(0,v.useCallback)(function(e){var t=(0,i._)((0,r._)({},e),{state:s.Deleting});_(function(e){return(0,Z._)(e).concat([t])})},[]),ew=(0,v.useCallback)(function(e){_(function(t){return t.filter(function(t){return t.name!==e.name})})},[]),e_=(0,v.useMemo)(function(){return(0,Z._)(ee).concat((0,Z._)(w)).filter(function(e,t,n){if(e.use_case!==P.Ei.MyFiles)return!1;e.retrieval_index_status===P.Xf.Success||e.retrieval_index_status===P.Xf.Failed||N.current.includes(e.id)||(N.current.push(e.id),J((0,Z._)(N.current)));var a=eM(n,e);return e.state===s.Uploading&&-1!==a?(_(function(t){return t.filter(function(t){return t.name!==e.name||t.state!==s.Uploading})}),!1):e.state===s.Deleting&&-1===n.findIndex(function(t){return t.name===e.name&&t.state!==s.Deleting})?(_(function(t){return t.filter(function(t){return t.name!==e.name})}),!1):-1===n.findIndex(function(t){return t.name===e.name&&t.state===s.Deleting})}).sort(function(e,t){return new Date(t.ready_time).getTime()-new Date(e.ready_time).getTime()})},[ee,eM,w]),eN=(0,v.useMemo)(function(){return e_.reduce(function(e,t){return e+(t.size||0)},0)},[e_]),eC=(0,v.useMemo)(function(){return eN/1073741824},[eN]),eF=(0,v.useCallback)((u=(0,F._)(function(e){var t,n,a,r,i,o,l,c,u,d;return(0,S.Jh)(this,function(f){if(e.length>10)return H.m.warning(h.formatMessage(V.tooManyFilesUploadedAtOnce,{maxFiles:10})),[2];t=eN,n=!0,a=!1,r=void 0;try{for(i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){if(l=o.value,(t+=l.size)>2147483648){H.m.warning(h.formatMessage(V.totalFileSizeExceedsLimit,{maxSize:"".concat(2,"GB")}));break}if(c=l.name,ee.filter(function(e){return e.use_case===P.Ei.MyFiles}).find(function(e){return e.name===c}))try{c=G(c,ee)}catch(e){H.m.warning(h.formatMessage(V.tooManyFilesWithSameName));break}u={id:"",name:c,ready_time:new Date().toISOString(),use_case:P.Ei.MyFiles,size:l.size,state:s.Uploading},_(function(e){return(0,Z._)(e).concat([u])}),d=new File([l],c,{type:l.type}),ef.mutate(d)}}catch(e){a=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return[2]})}),function(e){return u.apply(this,arguments)}),[ee,h,ef,eN]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(L.Z,{isOpen:!0,onClose:ed,size:"custom",className:"max-w-5xl",type:"success",title:h.formatMessage(V.myFiles),closeButton:(0,c.jsx)(B.ZP.CloseButton,{onClose:ed}),children:[x?(0,c.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,c.jsx)(W.Z,{className:"text-gray-500"})}):e_.length>0?(0,c.jsxs)("div",{className:"flex flex-col",children:[(0,c.jsx)("div",{className:"mb-2 text-xs text-gray-600 dark:text-gray-300",children:(0,c.jsx)(j.Z,(0,i._)((0,r._)({},V.filesModalDescription),{values:{totalUploadedSize:(0,c.jsx)("span",{className:"font-bold",children:"".concat(Number(eC).toPrecision(2),"GB")}),maxFileSize:"".concat(2,"GB")}}))}),(0,c.jsxs)(I.Z.Root,{className:"max-h-[28rem]",fixed:!0,size:"compact",children:[(0,c.jsxs)(I.Z.Header,{children:[(0,c.jsx)(I.Z.HeaderCell,{className:"max-w-8/12 w-8/12 dark:bg-gray-900",children:h.formatMessage(V.name)}),(0,c.jsx)(I.Z.HeaderCell,{children:h.formatMessage(V.date)}),(0,c.jsx)(I.Z.HeaderCell,{children:h.formatMessage(V.size)}),(0,c.jsx)(I.Z.HeaderCell,{textAlign:"right",children:(0,c.jsxs)(A.Z.Root,{children:[(0,c.jsx)(A.Z.Trigger,{children:(0,c.jsx)(y.K9M,{className:"icon-sm"})}),(0,c.jsx)(A.Z.Portal,{children:(0,c.jsxs)(A.Z.Content,{children:[(0,c.jsxs)(A.Z.Item,{onClick:ex,className:"flex gap-2",children:[(0,c.jsx)(y._hL,{className:"icon-sm"}),(0,c.jsx)("span",{children:h.formatMessage(V.downloadAll)})]}),(0,c.jsxs)(A.Z.Item,{onClick:ep,className:"flex gap-2",children:[(0,c.jsx)(y.Ybf,{className:"icon-sm"}),(0,c.jsx)("span",{children:h.formatMessage(V.deleteAll)})]})]})})]})})]}),(0,c.jsx)(I.Z.Body,{children:e_.map(function(e,t){return(0,c.jsx)(Q,{file:e,refetch:M,handleFileDelete:ek,handleFileDeleteFailed:ew,session:X,downloadedFiles:en,setDownloadedFiles:ea},t)})})]})]}):(0,c.jsx)(j.Z,(0,r._)({},V.noFilesFound)),(0,c.jsx)(O,{accept:q.join(","),onFilePicked:eF,loading:ef.isLoading,disabled:ef.isLoading,className:"mt-4 flex items-center space-x-2 rounded bg-green-600 px-4 py-2 text-white",text:h.formatMessage(V.uploadFile),multiple:!0})]}),(0,c.jsx)(L.Z,{isOpen:er,onClose:function(){return ei(!1)},type:"danger",title:h.formatMessage(V.confirmDeleteAll),primaryButton:(0,c.jsx)(B.ZP.Button,{title:h.formatMessage(V.deleteAll),color:"danger",onClick:ev}),secondaryButton:(0,c.jsx)(B.ZP.Button,{title:h.formatMessage(V.deleteHistoryModalCancel),color:"neutral",onClick:ey})}),(0,c.jsx)(L.Z,{isOpen:el,onClose:function(){return ec(!1)},type:"success",title:h.formatMessage(V.confirmDownloadAll),primaryButton:(0,c.jsx)(B.ZP.Button,{title:h.formatMessage(V.downloadAll),color:"primary",onClick:eb}),secondaryButton:(0,c.jsx)(B.ZP.Button,{title:h.formatMessage(V.confirmCancelDownloadAll),color:"neutral",onClick:ej})})]})}var X=n(12346),ee=n(13090),et=n(86273),en=n(90408),ea=n(82081),es=n(60554),er=n(35588),ei=n(97296),eo=n(16920);function el(){var e=(0,l._)(["group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm"]);return el=function(){return e},e}function ec(e){var t=e.showFreeTrialLoadingPayment,n=e.handleGetPaymentLink,a=(0,b.Z)(),s=(0,$.a)(["claimedReferralInvite"],function(){return T.ZP.getClaimedReferralInvite()},{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),l=s.data,u=s.isLoading,d=s.isSuccess,f=null==l?void 0:l.invite_code,m=(0,o._)((0,v.useState)(!1),2),h=m[0],g=m[1];if((0,v.useEffect)(function(){f&&!h&&d&&(g(!0),eo.m9.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),en.o.logEvent(ea.a.chatgptReferralShowClaimedSidebartMenuPromo))},[f,g,h,d]),!f||u||!d)return null;var x=f.invite_metadata.invite_data,M=(null==x?void 0:x.referral_trial_duration_months)?(null==x?void 0:x.referral_trial_duration_months)>1?a.formatMessage(ed.monthsOfBenefit,{referralTrialDurationMonths:null==x?void 0:x.referral_trial_duration_months}):a.formatMessage(ed.daysOfBenefit,{referralTrialDurationDays:null==x?void 0:x.referral_trial_duration_days}):null;return(0,c.jsx)(ei.E.div,{className:(0,p.default)("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:(0,c.jsxs)(eu,{className:(0,p.default)(t&&"opacity-75"),onClick:function(){t||((0,er.Vk)(!0),n())},children:[(0,c.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-3 ",children:[(0,c.jsx)(y.E33,{className:"icon-sm shrink-0"}),(0,c.jsx)(j.Z,(0,i._)((0,r._)({},ed.freeTrialCta),{values:{duration:M}}))]}),!t&&(0,c.jsx)(y.q5L,{onClick:function(e){e.stopPropagation(),(0,er.zG)(!0),(0,er.H1)(!0)},className:"icon-md shrink-0 rounded-full p-0.5 text-gray-400 opacity-50  transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500  group-hover:opacity-100"}),(0,c.jsx)("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}var eu=k.Z.a(el()),ed=(0,M.vU)({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!",description:"Get free trial menu item"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}",description:"Duration of the referral trial benefits in months"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}",description:"Duration of the referral trial benefits in days"}}),ef=n(15329),em=n(21739),eh=n(38566);function eg(){var e,t=(0,es.useRouter)(),n=(0,b.Z)(),a=(0,m.hz)(),s=(0,m.$T)(),i=(0,m.WY)(),o=(0,m.Zp)(),l=(e=(0,F._)(function(){var e;return(0,S.Jh)(this,function(a){switch(a.label){case 0:(0,er.Vk)(!0),en.o.logEvent(ea.a.clickAccountPaymentCheckout),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,T.ZP.getCheckoutLink()];case 2:return e=a.sent(),t.push(e.url),[3,5];case 3:return a.sent(),H.m.warning(n.formatMessage(ex.paymentErrorWarning),{hasCloseButton:!0}),(0,er.Vk)(!1),[3,5];case 4:return[7];case 5:return[2]}})}),function(){return e.apply(this,arguments)}),u=(0,er.tS)(function(e){return e.didCloseFreeTrial}),f=(0,er.tS)(function(e){return e.showFreeTrialLoadingPayment}),h=!u&&o,g=!i&&!a.has("disable_upgrade_ui"),p=(0,m.KQ)(),x=(0,em.g)(function(e){return e.flags.isUserInCanPayGroup}),M=(0,m.ec)(m.F_.isBusinessWorkspace),k=(0,er.tS)(function(e){return{setShowAccountPaymentModal:e.setShowAccountPaymentModal}}).setShowAccountPaymentModal,w=(0,v.useCallback)(function(){k(!0,function(){en.o.logEvent(ea.a.clickSidebarAccountPaymentMenuItem)})},[k]),_=(0,eh.C)(function(e){return{setShowReferralInviteModal:e.setShowReferralInviteModal}}).setShowReferralInviteModal,N=(0,v.useCallback)(function(){eo.m9.logEvent("chatgpt_referral_invite_sidebar_clicked"),en.o.logEvent(ea.a.chatgptReferralInviteSidebarClicked),_(!0,function(){en.o.logEvent(ea.a.clickSidebarAccountPaymentMenuItem)})},[_]);return(0,c.jsxs)(c.Fragment,{children:[(a.has(d.a3)||i)&&(0,c.jsx)(ep,{handleReferralInvite:N}),!i&&h&&(0,c.jsx)(ec,{showFreeTrialLoadingPayment:f,handleGetPaymentLink:l}),!s&&!1===i&&x&&!M&&(0,c.jsx)(ef.Vq,{onClick:h?function(){f||((0,er.Vk)(!0),l())}:w,className:"rounded-md",children:(0,c.jsxs)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:[(0,c.jsxs)("span",{className:"gold-new-button flex items-center gap-3",children:[f?(0,c.jsx)(W.Z,{className:"icon-sm shrink-0"}):(0,c.jsx)(y.fzv,{className:"icon-sm shrink-0"}),p?(0,c.jsx)(j.Z,(0,r._)({},ex.renewPlus)):(0,c.jsx)(j.Z,(0,r._)({},ex.upgradeToPlus))]}),!a.has(d.a3)&&g&&!p&&(0,c.jsx)("span",{className:"rounded-md bg-yellow-200 px-1.5 py-0.5 text-xs font-medium uppercase text-gray-800",children:(0,c.jsx)(j.Z,(0,r._)({},ex.newLabel))})]})})]})}var ep=function(e){var t=e.handleReferralInvite,n=(0,m.hz)().has(d.a3),a=(0,$.a)(["referralInvites"],function(){return T.ZP.getEligibleReferralInvites()},{enabled:n}),s=a.data,i=a.isSuccess,l=(null==s?void 0:s.invites_remaining)&&(null==s?void 0:s.invites_remaining)>0&&i,u=(0,o._)((0,v.useState)(!1),2),f=u[0],h=u[1];return((0,v.useEffect)(function(){l&&!f&&(h(!0),eo.m9.logEvent("chatgpt_referral_show_sidebar_menu_item"),en.o.logEvent(ea.a.chatgptReferralShowSidebarMenuItem))},[l,h,f]),l)?(0,c.jsx)(ef.Vq,{onClick:t,className:"rounded-md",children:(0,c.jsxs)("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:[(0,c.jsxs)("span",{className:"gold-new-button flex items-center gap-3",children:[(0,c.jsx)(y.zy7,{className:"icon-sm shrink-0"}),(0,c.jsx)(j.Z,(0,r._)({},ex.inviteReferral))]}),(0,c.jsx)("span",{className:"rounded-md bg-yellow-200 px-1.5 py-0.5 text-xs font-medium uppercase text-gray-800",children:(0,c.jsx)(j.Z,(0,r._)({},ex.newLabel))})]})}):null},ex=(0,M.vU)({upgradeToPlus:{id:"PaymentMenuItems.upgradeToPlus",defaultMessage:"Upgrade to Plus",description:"Upgrade to Plus menu item"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus",description:"Renew Plus menu item"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend",description:"Invite referral menu item"},newLabel:{id:"PaymentMenuItems.newLabel",defaultMessage:"NEW",description:"Label for new features or items"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",description:"Error toast when payment page has an error",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}}),ev=n(33669),ey=n(88809),eb=n(7813),ej=n(6948),eM=n(61888),ek=n(6038),ew=n(52696),e_=n(88327),eN=n(44513);function eC(){var e=(0,m.WY)(),t=(0,m.hz)(),n=(0,v.useCallback)(function(){en.o.logEvent(ea.a.clickSidebarAccountPortalMenuItem),f.vm.openModal(f.B.AccountPortal)},[]),a=t.has(d.Rw)||t.has(d.uo);return(0,c.jsxs)(c.Fragment,{children:[!0===e&&(0,c.jsxs)(ef.ZP,{onClick:n,children:[(0,c.jsx)(y.fzv,{className:"icon-sm shrink-0"}),(0,c.jsx)(j.Z,(0,r._)({},eF.myPlan))]}),a&&(0,c.jsxs)(ef.ZP,{onClick:function(){return f.vm.openModal(f.B.UserContext)},children:[(0,c.jsx)(e_.wP,{className:"h-4 w-4 shrink-0"}),(0,c.jsx)(j.Z,(0,r._)({},eF.chatPreferences))]}),!1]})}var eF=(0,M.vU)({myPlan:{id:"popoverNavigation.myPlan",defaultMessage:"My plan",description:"My plan menu item"},chatPreferences:{id:"popoverNavigation.chatPreferences",defaultMessage:"Custom instructions",description:"Custom instructions menu item"},myFiles:{id:"popoverNavigation.myFiles",defaultMessage:"My files",description:"Files menu item"}}),eZ=n(57101),eS=n(9181),eP=n.n(eS);function eT(){var e=(0,m.hz)(),t=e.has(d.Rw)||e.has(d.uo),n=(0,C.Ml)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eD,{href:"/admin",children:[(0,c.jsx)(eZ.Z,{className:"icon-sm"}),(0,c.jsx)(j.Z,(0,r._)({},eE.myWorkspaceSettings))]}),e.has(d.L0.WorkspaceConversationTemplates)&&(0,c.jsxs)(eD,{href:n?"/gizmo/explore":"/templates",children:[(0,c.jsx)(y.Wpg,{className:"icon-sm"}),(0,c.jsx)(j.Z,(0,r._)({},eE.templates))]}),t&&(0,c.jsxs)(ef.ZP,{onClick:function(){return f.vm.openModal(f.B.UserContext)},children:[(0,c.jsx)(e_.wP,{className:"h-4 w-4"}),(0,c.jsx)(j.Z,(0,r._)({},eE.chatPreferences))]})]})}function eD(e){var t=e.href,n=e.children;return(0,c.jsx)(eb.v.Item,{children:function(e){var a=e.active;return(0,c.jsx)(eP(),{href:t,children:(0,c.jsx)(ef.ZB,{$as:"span",className:(0,p.default)(a?"bg-gray-100 dark:bg-gray-800":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800"),children:n})})}})}var eE=(0,M.vU)({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Workspace settings",description:"Workspace settings menu item"},templates:{id:"workspacePopoverNavigation.templates",defaultMessage:"Templates",description:"Template directory menu item"},chatPreferences:{id:"workspacePopoverNavigation.chatPreferences",defaultMessage:"Custom instructions",description:"Custom instructions menu item"}});function eR(e){var t=e.onClickSettings;return(0,c.jsxs)(eb.v,{as:"div",className:"group relative",children:[(0,c.jsx)(eO,{}),(0,c.jsx)(eN.m,{children:(0,c.jsx)(eb.v.Items,{className:"absolute bottom-full left-0 z-20 mb-1 w-full overflow-hidden rounded-md bg-white pb-1.5 pt-1 outline-none dark:bg-gray-950",children:(0,c.jsx)(eW,{onClickSettings:t})})})]})}function ez(){var e=(0,R.kP)().session,t=null==e?void 0:e.user;return t?(0,c.jsxs)("div",{className:"px-3 py-2",children:[(0,c.jsx)("div",{className:"text-sm font-bold text-gray-600 dark:text-gray-400",children:(0,c.jsx)(j.Z,(0,r._)({},eH.accountSwitcherTitle))}),(0,c.jsx)("div",{className:"text-sm text-gray-400 dark:text-gray-600",children:null==t?void 0:t.email})]}):null}function eA(){var e=(0,m.ec)(function(e){return e.currentWorkspace}),t=(0,b.Z)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ez,{}),(0,c.jsxs)("div",{className:"flex w-full items-center justify-start gap-2 px-3 py-1",children:[(0,c.jsx)(ek.zf,{iconSize:"medium",workspace:e}),(0,c.jsx)("div",{className:"flex-grow text-base dark:text-white",children:(0,ew.CV)(t,e)})]}),(0,c.jsx)(ef.R,{})]})}function eB(){var e=(0,b.Z)(),t=(0,m.ec)(function(e){return e.workspaces}),n=(0,m.ec)(function(e){return e.currentWorkspace}),a=(0,o._)((0,v.useState)(!1),2),s=a[0],r=a[1],i=(0,eM.compact)([t.find(function(e){return e.structure===P.CZ.PERSONAL})].concat((0,Z._)(t.filter(function(e){return e.structure!==P.CZ.PERSONAL}))));return i.sort(function(e,t){return e.structure===P.CZ.PERSONAL?1:t.structure===P.CZ.PERSONAL?-1:0}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ez,{}),(0,c.jsx)("div",{className:"flex w-full flex-col",children:i.map(function(t){return(0,c.jsx)(ef.ZP,{onClick:function(){t.id!==(null==n?void 0:n.id)&&(r(!0),m.w_.setCurrentWorkspace(t),(0,ey.M)())},children:(0,c.jsxs)("div",{className:"flex w-full items-center justify-start gap-3 py-1",children:[(0,c.jsx)(ek.zf,{iconSize:"small",workspace:t,className:"flex-shrink-0"}),(0,c.jsx)("div",{className:"flex-grow truncate dark:text-white",children:(0,ew.CV)(e,t)}),s?(0,c.jsx)(W.Z,{}):(0,c.jsx)("div",{className:(0,p.default)("flex h-4 w-4 flex-shrink-0 rounded-full border align-middle",{"bg-white":t.id===(null==n?void 0:n.id)}),children:t.id===(null==n?void 0:n.id)&&(0,c.jsx)(y.UgA,{className:"m-auto h-3 w-3 scale-x-75 stroke-black stroke-[4]"})})]})},t.id)})}),(0,c.jsx)(ef.R,{})]})}var eL="oai/apps/hasSeenUserSurvey6_23";function eI(){var e=(0,b.Z)(),t=(0,ev.w$)(),n=(0,o._)((0,v.useState)(!1),2),a=n[0],s=n[1],i=ej.m.getItem(eL);return a||i?null:(0,c.jsx)("div",{className:"mx-1 mb-1 rounded-sm bg-[#0077FF]",children:(0,c.jsxs)("div",{className:"flex flex-col items-center justify-stretch gap-3 p-3 text-sm text-white",children:[(0,c.jsxs)("div",{className:"flex w-full items-start",children:[(0,c.jsxs)("div",{className:"flex-grow",children:[(0,c.jsx)("div",{className:"font-bold",children:(0,c.jsx)(j.Z,(0,r._)({},eH.surveyTitle))}),(0,c.jsx)("div",{children:(0,c.jsx)(j.Z,(0,r._)({},eH.surveyDescription))})]}),(0,c.jsx)("button",{className:"text-white/25 hover:text-white/40",onClick:function(){s(!0),ej.m.setItem(eL,!0)},"aria-label":e.formatMessage(eH.surveyDismiss),children:(0,c.jsx)(e_.QF,{width:t?"20px":"24px",height:t?"20px":"24px"})})]}),(0,c.jsxs)("a",{href:"https://openai.qualtrics.com/jfe/form/SV_7QmSGWHymCCmIxE",target:"_blank",className:"flex w-full flex-row items-center justify-center gap-2 rounded-[4px] bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:function(){ej.m.setItem(eL,!0),s(!0)},children:[(0,c.jsx)(y.AlO,{className:"icon-sm"}),(0,c.jsx)(j.Z,(0,r._)({},eH.takeSurveyButton))]})]})})}function eW(e){var t=e.onClickSettings,n=(0,m.WY)(),a=(0,m.ec)(m.F_.isBusinessWorkspace),s=(0,m.hz)(),i=s.has(d.G_),o=(0,m.ec)(m.F_.hasMultipleWorkspaces),l=(0,ev.w$)(),u=s.has(d.rk);return(0,c.jsxs)("nav",{children:[i&&(0,c.jsx)(eI,{}),o?(0,c.jsx)(eB,{}):a&&(0,c.jsx)(eA,{}),a?(0,c.jsx)(eT,{}):(0,c.jsx)(eC,{}),(!u||!l)&&(0,c.jsxs)(ef.ZP,{as:"a",href:"https://help.openai.com/en/collections/3742473-chatgpt",target:"_blank",onClick:function(){en.o.logEvent(ea.a.clickFaqLink)},children:[(0,c.jsx)(y.AlO,{className:"icon-sm"}),(0,c.jsx)(j.Z,(0,r._)({},eH.helpAndFaq))]}),(0,c.jsxs)(ef.ZP,{onClick:t,children:[(0,c.jsx)(y.nbt,{className:"icon-sm"}),n?(0,c.jsx)(j.Z,(0,r._)({},eH.settingsPlus)):(0,c.jsx)(j.Z,(0,r._)({},eH.settings))]}),(0,c.jsx)(ef.R,{}),(0,c.jsxs)(ef.ZP,{onClick:function(){en.o.logEvent(ea.a.clickLogOut,{eventSource:"mouse"}),(0,R.w7)()},children:[(0,c.jsx)(y.xqh,{className:"icon-sm"}),(0,c.jsx)(j.Z,(0,r._)({},eH.logOut))]})]})}function eO(){var e=(0,R.kP)().session;return(null==e?void 0:e.user)?(0,c.jsx)(eU,{}):null}function eU(){var e=(0,ew.$3)(),t=(0,ew.cI)(),n=(0,m.ec)(m.F_.isBusinessWorkspace),a=(0,m.ec)(m.F_.hasMultipleWorkspaces);return(0,c.jsxs)(eb.v.Button,{className:"flex w-full items-center gap-3 rounded-md px-3 py-3 text-sm transition-colors duration-200 hover:bg-gray-100 group-ui-open:bg-gray-100 dark:hover:bg-gray-800 dark:group-ui-open:bg-gray-800",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)(ek.zf,{iconSize:"medium"})}),(0,c.jsxs)("div",{className:"grow overflow-hidden text-ellipsis whitespace-nowrap text-left text-gray-700 dark:text-white",children:[(0,c.jsx)("div",{className:"font-semibold",children:n?e:t}),(0,c.jsx)("div",{className:"text-xs text-gray-500",children:n?t:a?e:null})]}),(0,c.jsx)(y.K9M,{className:"icon-sm flex-shrink-0 text-gray-500"})]})}var eH=(0,M.vU)({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ",description:"Help & FAQ menu item"},settings:{id:"navigation.settings",defaultMessage:"Settings",description:"Settings menu item"},settingsPlus:{id:"navigation.settingsPlus",defaultMessage:"Settings & Beta",description:"Settings menu item for Plus users"},logOut:{id:"navigation.logOut",defaultMessage:"Log out",description:"Log out menu item"},takeSurveyButton:{id:"navigation.survey.takeSurveyButton",defaultMessage:"Take survey",description:"Survey offer call to action"},surveyDismiss:{id:"navigation.surveyDismiss",defaultMessage:"Dismiss survey",description:"Survey offer dismiss button"},surveyDescription:{id:"navigation.surveyDescription",defaultMessage:"Shape the future of ChatGPT.",description:"Survey offer description"},surveyTitle:{id:"navigation.surveyTitle",defaultMessage:"Weâ€™d love to hear from you!",description:"Survey offer title"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces",description:"Account switcher title"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace",description:"title for workspace without a name"}});function e$(){var e=(0,l._)(["flex-col flex-1 transition-opacity duration-500 -mr-2 pr-2\n  ",""]);return e$=function(){return e},e}function eY(e){var t=e.onNewThread,n=e.children,a=(0,b.Z)(),s=(0,m.hz)().has(d.Ue),o=(0,m.ec)(m.F_.isBusinessWorkspace),l=(0,v.useRef)(null),u=(0,v.useContext)(h.QL),f=u.historyDisabled,x=u.toggleHistoryDisabled,M=(0,u.getModifiedSettings)(),k=(0,X.Fr)().openSettings;(0,v.useEffect)(function(){M&&k()},[]);var _=(0,v.useCallback)(function(){t(),x()},[t,x]),N=(0,c.jsxs)("div",{className:(0,p.default)("absolute left-0 top-14 z-20 overflow-hidden transition-all duration-500",f?"visible max-h-72":"invisible max-h-0"),children:[(0,c.jsxs)("div",{className:"bg-gray-900 px-4 py-3",children:[(0,c.jsx)("div",{className:"p-1 text-sm text-gray-100",children:(0,c.jsx)(j.Z,(0,r._)({},eJ.chatHistoryOff))}),(0,c.jsx)("div",{className:"p-1 text-xs text-gray-500",children:(0,c.jsx)(j.Z,(0,i._)((0,r._)({},o?eJ.chatHistoryOffDescriptionBusiness:eJ.chatHistoryOffDescription),{values:{learnMore:(0,c.jsx)("a",{href:"https://help.openai.com/en/articles/7730893",target:"_blank",className:"underline",rel:"noreferrer",children:(0,c.jsx)(j.Z,(0,r._)({},eJ.learnMore))}),b:function(e){return(0,c.jsx)("strong",{children:e})}}}))}),(0,c.jsxs)(w.z,{className:"mt-4 w-full",onClick:_,color:"primary",size:"medium",children:[(0,c.jsx)(y.$IY,{className:"icon-sm"}),(0,c.jsx)(j.Z,(0,r._)({},eJ.enableChatHistory))]})]}),(0,c.jsx)("div",{className:"h-24 bg-gradient-to-t from-gray-900/0 to-gray-900"})]}),F=(0,C.Ml)();return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"scrollbar-trigger relative h-full w-full flex-1 items-start border-white/20",children:[(0,c.jsx)(g.f,{asChild:!0,children:(0,c.jsx)("h2",{children:(0,c.jsx)(j.Z,(0,r._)({},eJ.chatHistoryLabel))})}),(0,c.jsxs)("nav",{className:"flex h-full w-full flex-col p-2","aria-label":a.formatMessage(eJ.chatHistoryLabel),children:[F?(0,c.jsx)(eV,{onNewThread:t}):(0,c.jsxs)("div",{className:"mb-1 flex flex-row gap-2",children:[(0,c.jsxs)(ee.MP,{onClick:t,className:"bg-white dark:bg-transparent",children:[f?(0,c.jsx)(y.Bw1,{className:"icon-sm shrink-0"}):(0,c.jsx)(y.OvN,{className:"icon-sm shrink-0"}),(0,c.jsx)("span",{className:"truncate",children:(0,c.jsx)(j.Z,(0,r._)({},f?eJ.clearChat:eJ.newChat))})]}),s&&(0,c.jsx)(ee.H,{})]}),N,(0,c.jsx)(eG,{ref:l,$disableScroll:f,children:n}),(0,c.jsx)(eq,{})]})]})})}function eq(){var e=(0,o._)((0,v.useState)(function(){var e=(0,x.getCookie)(u.Yl);return"string"==typeof e&&e!==u.bC}),1)[0],t=(0,m.hz)(),n=t.has(d.Rw)||t.has(d.uo),a=(0,X.Fr)().openSettings,s=(0,f.tN)(function(e){return e.isFilesModalOpen}),r=(0,m.$T)();return e&&r?null:(0,c.jsxs)("div",{className:"border-t border-black/20 pt-2 empty:hidden gizmo:border-token-border-light dark:border-white/20",children:[(0,c.jsx)(eg,{}),(0,c.jsx)(eR,{onClickSettings:function(){return a()}}),t.has("files_list_ui")&&s&&(0,c.jsx)(K,{}),n&&(0,c.jsx)(et.wm,{})]})}function eV(e){var t=e.onNewThread;return(0,c.jsxs)("div",{className:"flex justify-between py-1 pl-3 pr-2",children:[(0,c.jsx)(N.m,{}),(0,c.jsx)(_.u,{label:(0,c.jsx)(j.Z,(0,r._)({},eJ.newChat)),side:"right",sideOffset:4,children:(0,c.jsx)("button",{onClick:t,className:"flex h-10 w-11 items-center justify-center rounded-lg text-token-text-secondary hover:bg-token-surface-secondary",children:(0,c.jsx)(y.vPQ,{className:"icon-sm"})})})]})}var eG=k.Z.div(e$(),function(e){return e.$disableScroll?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}),eJ=(0,M.vU)({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history",description:"Chat history label heading"},chatHistoryOff:{id:"NavigationContent.chatHistoryOff",defaultMessage:"Chat History is off for this browser.",description:"Text indicating that chat history is turned off"},chatHistoryOffDescription:{id:"NavigationContent.chatHistoryOffDescription",defaultMessage:"When history is turned off, new chats on this browser won't appear in your history on any of your devices, be used to train our models, or stored for longer than 30 days. <b>This setting does not sync across browsers or devices.</b> {learnMore}",description:"Description for chat history being off"},chatHistoryOffDescriptionBusiness:{id:"NavigationContent.chatHistoryOffDescriptionBusiness",defaultMessage:"When history is turned off, new chats on this browser won't appear in your history on any of your devices, or stored for longer than 30 days. <b>This setting does not sync across browsers or devices.</b> {learnMore}",description:"Description for chat history being off"},learnMore:{id:"NavigationContent.learnMore",defaultMessage:"Learn more",description:"Learn more link text"},enableChatHistory:{id:"NavigationContent.enableChatHistory",defaultMessage:"Enable chat history",description:"Enable chat history button label"},clearChat:{id:"NavigationContent.clearChat",defaultMessage:"Clear chat",description:"Clear chat button label"},newChat:{id:"NavigationContent.newChat",defaultMessage:"New Chat",description:"New chat button label"}})},2166:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(22830),s=n(70079),r=n(37469);function i(e,t,n){var i=(0,r.XL)(e),o=i.title,l=i.titleSource,c=(0,a._)((0,s.useState)(!1),2),u=c[0],d=c[1],f=null!=o?o:t,m=(0,s.useRef)(f);return(0,s.useEffect)(function(){return n&&l===r._L.Generated&&f!==m.current&&d(!0),function(){m.current=f}},[n,f,l]),{isTypingEffect:u,resolvedTitle:f}}},21817:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(70079);function s(){var e=(0,a.useRef)([]),t=(0,a.useRef)(function(t,n){var a=setTimeout(t,n);return e.current.push(a),a});return(0,a.useEffect)(function(){var t=e.current;return function(){t.forEach(function(e){clearTimeout(e)})}},[]),t.current}}}]);